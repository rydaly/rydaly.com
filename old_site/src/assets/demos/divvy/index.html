<!doctype html>
<html lang="en">
    <head>
        <meta charset='utf-8'/>
        <!-- Typekit -->
        <script>
          (function(d) {
            var config = {
              kitId: 'iqi0tnq',
              scriptTimeout: 3000,
              async: true
            },
            h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
          })(document);
        </script>
        <title>Divvy Bike Share Data Map</title>
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="js/lib/pickadate/lib/themes/default.css" id="theme_base">
        <link rel="stylesheet" href="js/lib/pickadate/lib/themes/default.date.css" id="theme_date">
        <!--[if lte IE 8]>
        <script src="js/ddr-ecma5-min.js"></script>
        <![endif]-->
        <!-- <link rel="stylesheet" href="css/leaflet.css" /> -->
        <!-- <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.css" /> -->
    </head>
    <body>
        <div id="splash">
            
            <input id="datepicker" class="datepicker  picker__input" type="text" value="" placeholder="Pick a Date" readonly="" aria-haspopup="true" aria-expanded="false" aria-readonly="false" aria-owns="demo__api-open-close_root">
            
            <a href="#" class="go" onclick="splashOut('go');">GO</a>
        
        </div>

        <div id="progress-bar"></div>

        <div id="key">
            <ul>
                <li><i class="key-circ incoming"><i></i></i> <span>Incoming</span></li>
                <li><i class="key-circ outgoing"><i></i></i> <span>Outgoing</span></li>
            </ul>
        </div>
        
        <div id="clockDisplay" class="clockStyle"></div>
        
        <div id="map"></div>

        <script type="text/javascript" src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script>window.jQuery||document.write('<script src="js/lib/pickadate/tests/jquery.2.0.0.js"><\/script>')</script>
        <script type="text/javascript" src="js/lib/pickadate/lib/compressed/picker.js"></script>
        <script type="text/javascript" src="js/lib/pickadate/lib/compressed/picker.date.js"></script>
        <script type="text/javascript" src="js/lib/greensock/TweenLite.min.js"></script>
        <script type="text/javascript" src="js/lib/greensock/easing/EasePack.min.js"></script>
        <script type="text/javascript" src="js/lib/greensock/plugins/CSSPlugin.min.js"></script>
        <script type="text/javascript" src="js/lib/leaflet/leaflet.js"></script>
        <script type="text/javascript" src="js/lib/leaflet/leaflet.css.js"></script>
        <script type="text/javascript" src="js/lib/leaflet/leaflet.markercluster.js"></script>
        <script type="text/javascript" src="js/lib/leaflet/leaflet.providers.js"></script>
        <script type="text/javascript" src="js/lib/leaflet/leaflet.hash.js"></script>
        <script type="text/javascript" src="js/lib/leaflet/leaflet.geometryutil.js"></script>
        <!-- <script type="text/javascript" src="js/lib/d3/d3.v3.min.js"></script> -->
        <script type="text/javascript" src="bower_components/d3/d3.min.js"></script>
        <script type="text/javascript" src="bower_components/d3-tip/index.js"></script>
        <script type="text/javascript" src="js/correctingInterval.min.js"></script>
        <script type="text/javascript" src="js/main.js"></script>
        <script type="text/javascript">
            
            window.onload = function() {
                window.location.hash = 'init';
                initMain(); // init app in the background

                var picker_input = $('.datepicker'),
                    
                    picker = picker_input.pickadate({
                        today: '',
                        min: new Date(2013, 0, 1),
                        max: new Date(2013, 11, 31),
                        selectMonths: false,
                        selectYears: false,
                        format: 'dddd, mmm dd, yyyy',
                        
                        onOpen: function() {
                            // console.log('Opened up!');
                        },
                        onClose: function() {
                            // console.log('Closed now');
                        },
                        onRender: function() {
                            // console.log('Just rendered anew');
                        },
                        onStart: function() {
                            // console.log('Hello there :)');
                        },
                        onStop: function() {
                            // console.log('See ya');
                        },
                        onSet: function(thingSet) {
                            // console.log('Set stuff:', thingSet);
                            picker_obj.off('set');
                        }
                    }),

                    picker_obj = picker.pickadate('picker');
                    picker_obj.set('view', [ 2013, 0, 1 ]);
            };

            var splash = document.getElementById('splash');
            var map = document.getElementById('map');

            function splashOut(data) {
                TweenLite.to(splash, 0.75, { autoAlpha:0, height:0, onComplete:runApp, onCompleteParams:[data] });
                TweenLite.to(map, 0.75, { autoAlpha:1 });
            }

            function runApp(data) {
                window.location.hash = data;
                initMain();
            }

        </script>
    </body>
</html>